<div id="page-loader" class="page-loader">
  <div class="loader-content">
    <div class="electric-loader">
      <div class="bolt">⚡</div>
      <div class="circles">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
      </div>
    </div>
    <p class="loader-text">Habilitelec Formations</p>
    <p class="loader-subtext">Chargement de l'expertise électrique...</p>
  </div>
</div>

<style>
  .page-loader {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    transition: opacity 0.5s ease, visibility 0.5s ease;
  }
  
  .page-loader.hidden {
    opacity: 0;
    visibility: hidden;
  }
  
  .loader-content {
    text-align: center;
  }
  
  .electric-loader {
    position: relative;
    width: 150px;
    height: 150px;
    margin: 0 auto 2rem;
  }
  
  .bolt {
    font-size: 4rem;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    animation: boltPulse 1.5s ease-in-out infinite alternate;
    text-shadow: 0 0 20px #fbbf24;
  }
  
  @keyframes boltPulse {
    0% { 
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }
    100% { 
      transform: translate(-50%, -50%) scale(1.2);
      opacity: 0.7;
    }
  }
  
  .circles {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
  
  .circle {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    border: 2px solid rgba(102, 126, 234, 0.3);
    border-radius: 50%;
    animation: circleExpand 2s ease-out infinite;
  }
  
  .circle:nth-child(1) {
    width: 100%;
    height: 100%;
    animation-delay: 0s;
  }
  
  .circle:nth-child(2) {
    width: 130%;
    height: 130%;
    animation-delay: 0.3s;
  }
  
  .circle:nth-child(3) {
    width: 160%;
    height: 160%;
    animation-delay: 0.6s;
  }
  
  @keyframes circleExpand {
    0% {
      width: 100%;
      height: 100%;
      opacity: 1;
    }
    100% {
      width: 200%;
      height: 200%;
      opacity: 0;
    }
  }
  
  .loader-text {
    color: white;
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    letter-spacing: 2px;
  }
  
  .loader-subtext {
    color: #94a3b8;
    font-size: 0.875rem;
  }
</style>

<script>
  // Version corrigée avec vérification de null
  window.addEventListener('DOMContentLoaded', () => {
    const loader = document.getElementById('page-loader');
    
    // Vérifier si l'élément existe
    if (!loader) {
      console.warn('Loader element not found');
      return;
    }
    
    // Cacher le loader après le chargement complet
    window.addEventListener('load', () => {
      setTimeout(() => {
        loader.classList.add('hidden');
        setTimeout(() => {
          if (loader) {
            loader.style.display = 'none';
          }
        }, 500);
      }, 800); // Réduit à 800ms pour une meilleure expérience
    });
    
    // Fallback: cacher le loader après 3s max
    setTimeout(() => {
      if (loader && !loader.classList.contains('hidden')) {
        loader.classList.add('hidden');
        setTimeout(() => {
          if (loader) {
            loader.style.display = 'none';
          }
        }, 500);
      }
    }, 3000);
  });
</script>